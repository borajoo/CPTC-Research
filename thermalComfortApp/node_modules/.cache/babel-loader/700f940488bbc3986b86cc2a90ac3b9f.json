{"ast":null,"code":"var _jsxFileName = \"/Users/gabehyun/Desktop/classes/ThermalComfort/CPTC-Research/thermalComfortApp/src/components/Survey/Survey.tsx\";\nimport React from 'react';\nimport './Survey.css';\nimport BaseButton from '../BaseButton/BaseButton';\nimport BaseInputField from '../BaseInputField/BaseInputField';\nimport BaseSelectOne from '../BaseSelectOne/BaseSelectOne';\nimport BaseSelectMultiple from '../BaseSelectMultiple/BaseSelectMultiple';\nimport SecondaryButton from \"../../components/SecondaryButton/SecondaryButton\";\nimport { pushData } from '../../firebaseConfig';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { toast } from '../../toast';\n\nvar request = require('request');\n\nfunction Survey(props) {\n  const {\n    toggleState\n  } = props;\n  const {\n    currentUser\n  } = useAuth();\n  let canSubmit = true;\n  let surveyData = {};\n  const date = new Date();\n\n  function getWeatherData() {\n    let apiKey = 'a28b0237f94d95bbd08c26352f7c7bdb';\n    let city = \"San Luis Obispo\";\n    let url = `http://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`;\n    request(url, function (err, response, body) {\n      if (err) {\n        return;\n      } else {\n        if (body.cod !== \"404\") {\n          let weatherData = JSON.parse(body);\n\n          if (weatherData.main) {\n            console.log(weatherData.main.temp);\n            console.log(weatherData.wind.speed);\n            console.log(weatherData.main.humidity); // surveyData.temp = weatherData.main.temp;\n            // surveyData.windspeed = weatherData.wind.speed;\n            // surveyData.humidity = weatherData.main.humidity;\n          }\n        }\n      }\n    });\n  }\n\n  getWeatherData();\n\n  function postData() {\n    setTrySubmit(true);\n\n    if (currentUser) {\n      buildingNumber != '' ? surveyData.buildingNumber = buildingNumber : canSubmit = false;\n      roomNumber != '' ? surveyData.roomNumber = roomNumber : canSubmit = false;\n      tempInRoom != '' ? surveyData.thermalSensation = tempInRoom : canSubmit = false;\n      preferFeel != '' ? surveyData.thermalPreference = preferFeel : canSubmit = false;\n      airCirculation != '' ? surveyData.airCirculationSensation = airCirculation : canSubmit = false;\n      humid != '' ? surveyData.humiditySensation = humid : canSubmit = false;\n      clothing != '' ? surveyData.clothing = clothing : canSubmit = false;\n      activities != [] ? surveyData.recentAction = activities : canSubmit = false;\n      surveyData.timestamp = date.toLocaleString().toString();\n\n      if (canSubmit) {\n        try {\n          pushData(surveyData, currentUser.email);\n          toast(`Thank you! Survey submitted successfully.`);\n        } catch (error) {\n          toast(`Error submitting survey: ${error}`);\n        }\n\n        toggleState();\n      } else {\n        toast('Please answer all of the questions before submitting.');\n      }\n    }\n  }\n\n  const [trySubmit, setTrySubmit] = React.useState(false);\n  const [buildingNumber, setBuildingNumber] = React.useState('');\n  const [roomNumber, setRoomNumber] = React.useState('');\n  const tempInRoomList = [{\n    id: 1,\n    val: 'Cold'\n  }, {\n    id: 2,\n    val: 'Cool'\n  }, {\n    id: 3,\n    val: 'Slightly Cool'\n  }, {\n    id: 4,\n    val: 'Neutral: Neither Cool or Warm'\n  }, {\n    id: 5,\n    val: 'Slightly Warm'\n  }, {\n    id: 6,\n    val: 'Warm'\n  }, {\n    id: 7,\n    val: 'Hot'\n  }];\n  const [tempInRoom, setTempInRoom] = React.useState('');\n  const preferFeelList = [{\n    id: 1,\n    val: 'Cooler'\n  }, {\n    id: 2,\n    val: 'No Change'\n  }, {\n    id: 3,\n    val: 'Warmer'\n  }];\n  const [preferFeel, setPreferFeel] = React.useState('');\n  const airCirculationList = [{\n    id: 1,\n    val: 'Cooler'\n  }, {\n    id: 2,\n    val: 'No Change'\n  }, {\n    id: 3,\n    val: 'Warmer'\n  }];\n  const [airCirculation, setAirCirculation] = React.useState('');\n  const humidList = [{\n    id: 1,\n    val: 'Too Dry'\n  }, {\n    id: 2,\n    val: 'Slightly Dry'\n  }, {\n    id: 3,\n    val: 'Just Right'\n  }, {\n    id: 4,\n    val: 'Slightly Humid'\n  }, {\n    id: 5,\n    val: 'Too Humid'\n  }];\n  const [humid, setHumid] = React.useState('');\n  const clothingList = [{\n    id: 1,\n    val: 'Minimal [shorts, shirt]'\n  }, {\n    id: 2,\n    val: 'Average [pants, shirt]'\n  }, {\n    id: 3,\n    val: 'Heavy [pants, jacket/sweater/sweatshirt]'\n  }];\n  const [clothing, setClothing] = React.useState('');\n  const activitiesList = [{\n    id: 1,\n    val: 'Sitting'\n  }, {\n    id: 2,\n    val: 'Standing'\n  }, {\n    id: 3,\n    val: 'Walking'\n  }, {\n    id: 4,\n    val: 'Jogging/Fast Walking'\n  }, {\n    id: 5,\n    val: 'Running'\n  }, {\n    id: 6,\n    val: 'Other'\n  }];\n  const [activities, setActivities] = React.useState([]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"survey-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SecondaryButton, {\n    onClick: toggleState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, \"Back\")), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"Survey\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"baseinput-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BaseInputField, {\n    label: 'What building are you in?',\n    iduser: 'building',\n    width: '300px',\n    value: buildingNumber,\n    onChange: e => setBuildingNumber(e.target.value),\n    err: trySubmit && buildingNumber == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"baseinput-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BaseInputField, {\n    label: 'What room are you in?',\n    iduser: 'room',\n    width: '300px',\n    value: roomNumber,\n    onChange: e => setRoomNumber(e.target.value),\n    err: trySubmit && tempInRoom == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, \"How does the temperature feel in the room?\"), /*#__PURE__*/React.createElement(BaseSelectOne, {\n    optionsList: tempInRoomList,\n    value: tempInRoom,\n    onChange: e => setTempInRoom(e.target.value),\n    err: trySubmit && tempInRoom == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, \"How would you prefer for it to feel?\"), /*#__PURE__*/React.createElement(BaseSelectOne, {\n    optionsList: preferFeelList,\n    value: preferFeel,\n    onChange: e => setPreferFeel(e.target.value),\n    err: trySubmit && preferFeel == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, \"How do you feel about the air circulation in the room?\"), /*#__PURE__*/React.createElement(BaseSelectOne, {\n    optionsList: airCirculationList,\n    value: airCirculation,\n    onChange: e => setAirCirculation(e.target.value),\n    err: trySubmit && airCirculation == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, \"How humid does the room feel?\"), /*#__PURE__*/React.createElement(BaseSelectOne, {\n    optionsList: humidList,\n    value: humid,\n    onChange: e => setHumid(e.target.value),\n    err: trySubmit && humid == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, \"What clothing layers are you wearing?\"), /*#__PURE__*/React.createElement(BaseSelectOne, {\n    optionsList: clothingList,\n    value: clothing,\n    onChange: e => setClothing(e.target.value),\n    err: trySubmit && clothing == '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, \"What activities have you done in the past 10-20 minutes?\"), /*#__PURE__*/React.createElement(BaseSelectMultiple, {\n    optionsList: activitiesList,\n    value: activities,\n    onChange: e => setActivities(e.target.value),\n    err: trySubmit && activities.length == 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"survey-submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BaseButton, {\n    width: '300px',\n    onClick: postData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n}\n\n;\nexport default Survey;","map":{"version":3,"sources":["/Users/gabehyun/Desktop/classes/ThermalComfort/CPTC-Research/thermalComfortApp/src/components/Survey/Survey.tsx"],"names":["React","BaseButton","BaseInputField","BaseSelectOne","BaseSelectMultiple","SecondaryButton","pushData","useAuth","toast","request","require","Survey","props","toggleState","currentUser","canSubmit","surveyData","date","Date","getWeatherData","apiKey","city","url","err","response","body","cod","weatherData","JSON","parse","main","console","log","temp","wind","speed","humidity","postData","setTrySubmit","buildingNumber","roomNumber","tempInRoom","thermalSensation","preferFeel","thermalPreference","airCirculation","airCirculationSensation","humid","humiditySensation","clothing","activities","recentAction","timestamp","toLocaleString","toString","email","error","trySubmit","useState","setBuildingNumber","setRoomNumber","tempInRoomList","id","val","setTempInRoom","preferFeelList","setPreferFeel","airCirculationList","setAirCirculation","humidList","setHumid","clothingList","setClothing","activitiesList","setActivities","e","target","value","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Survey.css';\nimport BaseButton from '../BaseButton/BaseButton'\nimport BaseInputField from '../BaseInputField/BaseInputField';\nimport BaseSelectOne from '../BaseSelectOne/BaseSelectOne';\nimport BaseSelectMultiple from '../BaseSelectMultiple/BaseSelectMultiple';\nimport SecondaryButton from \"../../components/SecondaryButton/SecondaryButton\";\nimport { pushData } from '../../firebaseConfig';\nimport { useAuth } from '../../contexts/AuthContext'\nimport { toast } from '../../toast'\n\nvar request = require('request');\n\nfunction Survey(props: any) {\n  const { toggleState } = props;\n  const { currentUser } = useAuth();\n  let canSubmit = true;\n  let surveyData: any = {};\n  const date = new Date;\n\n  function getWeatherData(){\n    let apiKey = 'a28b0237f94d95bbd08c26352f7c7bdb';\n    let city = \"San Luis Obispo\";\n    let url = `http://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`\n    request(url, function (err:any, response:any, body:any) {\n        if(err){\n            return;\n        }\n        else {\n          if (body.cod !== \"404\") {\n            let weatherData = JSON.parse(body);\n            if (weatherData.main) {\n              console.log(weatherData.main.temp);\n              console.log(weatherData.wind.speed);\n              console.log(weatherData.main.humidity);\n              // surveyData.temp = weatherData.main.temp;\n              // surveyData.windspeed = weatherData.wind.speed;\n              // surveyData.humidity = weatherData.main.humidity;\n            }\n          }\n        }\n    });\n  }\n  getWeatherData();\n\n  function postData() {\n    setTrySubmit(true);\n    if (currentUser) {\n      buildingNumber != '' ? surveyData.buildingNumber = buildingNumber : canSubmit = false;\n      roomNumber != '' ? surveyData.roomNumber = roomNumber : canSubmit = false;\n      tempInRoom != '' ? surveyData.thermalSensation = tempInRoom : canSubmit = false;\n      preferFeel != '' ? surveyData.thermalPreference = preferFeel : canSubmit = false;\n      airCirculation != '' ? surveyData.airCirculationSensation = airCirculation : canSubmit = false;\n      humid != '' ? surveyData.humiditySensation = humid : canSubmit = false;\n      clothing != '' ? surveyData.clothing = clothing : canSubmit = false;\n      activities != [] ? surveyData.recentAction = activities : canSubmit = false;\n      surveyData.timestamp = date.toLocaleString().toString();\n      if(canSubmit){\n        try {\n          pushData(surveyData, currentUser.email);\n          toast(`Thank you! Survey submitted successfully.`);\n        }\n        catch(error) {\n          toast(`Error submitting survey: ${error}`);\n        }\n        toggleState();\n      }\n      else {\n        toast('Please answer all of the questions before submitting.');\n      }\n    }\n  }\n\n  const [trySubmit, setTrySubmit] = React.useState(false);\n  const [buildingNumber, setBuildingNumber] = React.useState('');\n  const [roomNumber, setRoomNumber] = React.useState('');\n\n  const tempInRoomList = [\n    {id: 1, val: 'Cold'},\n    {id: 2, val: 'Cool'},\n    {id: 3, val: 'Slightly Cool'},\n    {id: 4, val: 'Neutral: Neither Cool or Warm'},\n    {id: 5, val: 'Slightly Warm'},\n    {id: 6, val: 'Warm'},\n    {id: 7, val: 'Hot'},\n  ]\n  const [tempInRoom, setTempInRoom] = React.useState('');\n\n  const preferFeelList = [\n    {id: 1, val: 'Cooler'},\n    {id: 2, val: 'No Change'},\n    {id: 3, val: 'Warmer'},\n  ]\n  const [preferFeel, setPreferFeel] = React.useState('');\n\n  const airCirculationList = [\n    {id: 1, val: 'Cooler'},\n    {id: 2, val: 'No Change'},\n    {id: 3, val: 'Warmer'},\n  ]\n  const [airCirculation, setAirCirculation] = React.useState('');\n\n  const humidList = [\n    {id: 1, val: 'Too Dry'},\n    {id: 2, val: 'Slightly Dry'},\n    {id: 3, val: 'Just Right'},\n    {id: 4, val: 'Slightly Humid'},\n    {id: 5, val: 'Too Humid'},\n  ]\n  const [humid, setHumid] = React.useState('');\n\n  const clothingList = [\n    {id: 1, val: 'Minimal [shorts, shirt]'},\n    {id: 2, val: 'Average [pants, shirt]'},\n    {id: 3, val: 'Heavy [pants, jacket/sweater/sweatshirt]'},\n  ]\n  const [clothing, setClothing] = React.useState('');\n\n  const activitiesList = [\n    {id: 1, val: 'Sitting'},\n    {id: 2, val: 'Standing'},\n    {id: 3, val: 'Walking'},\n    {id: 4, val: 'Jogging/Fast Walking'},\n    {id: 5, val: 'Running'},\n    {id: 6, val: 'Other'},\n  ]\n  const [activities, setActivities] = React.useState([]);\n\n  return (\n    <div className=\"survey-container\">\n      <div className=\"top-buttons\">\n            <SecondaryButton onClick={toggleState}>Back</SecondaryButton>\n        </div>\n      <h1>Survey</h1>\n      <div className=\"baseinput-div\">\n        <BaseInputField\n          label={'What building are you in?'}\n          iduser={'building'}\n          width={'300px'}\n          value={buildingNumber}\n          onChange={(e: any) => setBuildingNumber(e.target.value)}\n          err={trySubmit && buildingNumber == ''}\n        />\n      </div>\n      <div className=\"baseinput-div\">\n        <BaseInputField\n          label={'What room are you in?'}\n          iduser={'room'}\n          width={'300px'}\n          value={roomNumber}\n          onChange={(e: any) => setRoomNumber(e.target.value)}\n          err={trySubmit && tempInRoom == ''}\n        />\n      </div>\n      <p>How does the temperature feel in the room?</p>\n      <BaseSelectOne\n        optionsList={tempInRoomList}\n        value={tempInRoom}\n        onChange={(e: any) => setTempInRoom(e.target.value)}\n        err={trySubmit && tempInRoom == ''}\n      />\n      <p>How would you prefer for it to feel?</p>\n      <BaseSelectOne\n        optionsList={preferFeelList}\n        value={preferFeel}\n        onChange={(e: any) => setPreferFeel(e.target.value)}\n        err={trySubmit && preferFeel == ''}\n      />\n      <p>How do you feel about the air circulation in the room?</p>\n      <BaseSelectOne\n        optionsList={airCirculationList}\n        value={airCirculation}\n        onChange={(e: any) => setAirCirculation(e.target.value)}\n        err={trySubmit && airCirculation == ''}\n      />\n      <p>How humid does the room feel?</p>\n      <BaseSelectOne\n        optionsList={humidList}\n        value={humid}\n        onChange={(e: any) => setHumid(e.target.value)}\n        err={trySubmit && humid == ''}\n      />\n      <p>What clothing layers are you wearing?</p>\n      <BaseSelectOne\n        optionsList={clothingList}\n        value={clothing}\n        onChange={(e: any) => setClothing(e.target.value)}\n        err={trySubmit && clothing == ''}\n      />\n      <p>What activities have you done in the past 10-20 minutes?</p>\n      <BaseSelectMultiple\n        optionsList={activitiesList}\n        value={activities}\n        onChange={(e: any) => setActivities(e.target.value)}\n        err={trySubmit && activities.length == 0}\n      />\n      <div className='survey-submit'>\n        <BaseButton width={'300px'} onClick={postData}>Submit</BaseButton>\n      </div>\n    </div>\n  )\n};\n\nexport default Survey"]},"metadata":{},"sourceType":"module"}