{"ast":null,"code":"import _slicedToArray from\"/Users/gabehyun/Desktop/classes/ThermalComfort/CPTC-Research/thermalComfortApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Survey.css';import BaseButton from'../BaseButton/BaseButton';import BaseInputField from'../BaseInputField/BaseInputField';import BaseSelectOne from'../BaseSelectOne/BaseSelectOne';import BaseSelectMultiple from'../BaseSelectMultiple/BaseSelectMultiple';import SecondaryButton from\"../../components/SecondaryButton/SecondaryButton\";import{pushData}from'../../firebaseConfig';import{useAuth}from'../../contexts/AuthContext';import{toast}from'../../toast';var request=require('request');function Survey(props){var toggleState=props.toggleState;var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var canSubmit=true;var surveyData={};var date=new Date();function getWeatherData(){var apiKey='a28b0237f94d95bbd08c26352f7c7bdb';var city=\"San Luis Obispo\";var url=\"http://api.openweathermap.org/data/2.5/weather?q=\".concat(city,\"&appid=\").concat(apiKey);request(url,function(err,response,body){if(err){return;}else{if(body.cod!==\"404\"){var weatherData=JSON.parse(body);if(weatherData.main){surveyData.temp=weatherData.main.temp;surveyData.windspeed=weatherData.wind.speed;surveyData.humidity=weatherData.main.humidity;}}}});}getWeatherData();function postData(){setTrySubmit(true);if(currentUser){buildingNumber!==''?surveyData.buildingNumber=buildingNumber:canSubmit=false;roomNumber!==''?surveyData.roomNumber=roomNumber:canSubmit=false;tempInRoom!==''?surveyData.thermalSensation=tempInRoom:canSubmit=false;preferFeel!==''?surveyData.thermalPreference=preferFeel:canSubmit=false;airCirculation!==''?surveyData.airCirculationSensation=airCirculation:canSubmit=false;humid!==''?surveyData.humiditySensation=humid:canSubmit=false;clothing!==''?surveyData.clothing=clothing:canSubmit=false;activities!==[]?surveyData.recentAction=activities:canSubmit=false;surveyData.timestamp=date.toLocaleString().toString();if(canSubmit){try{pushData(surveyData,currentUser.email);toast(\"Thank you! Survey submitted successfully.\");}catch(error){toast(\"Error submitting survey: \".concat(error));}toggleState();}else{toast('Please answer all of the questions before submitting.');}}}var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),trySubmit=_React$useState2[0],setTrySubmit=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),buildingNumber=_React$useState4[0],setBuildingNumber=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),roomNumber=_React$useState6[0],setRoomNumber=_React$useState6[1];var tempInRoomList=[{id:1,val:'Cold'},{id:2,val:'Cool'},{id:3,val:'Slightly Cool'},{id:4,val:'Neutral: Neither Cool or Warm'},{id:5,val:'Slightly Warm'},{id:6,val:'Warm'},{id:7,val:'Hot'}];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),tempInRoom=_React$useState8[0],setTempInRoom=_React$useState8[1];var preferFeelList=[{id:1,val:'Cooler'},{id:2,val:'No Change'},{id:3,val:'Warmer'}];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),preferFeel=_React$useState10[0],setPreferFeel=_React$useState10[1];var airCirculationList=[{id:1,val:'Cooler'},{id:2,val:'No Change'},{id:3,val:'Warmer'}];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),airCirculation=_React$useState12[0],setAirCirculation=_React$useState12[1];var humidList=[{id:1,val:'Too Dry'},{id:2,val:'Slightly Dry'},{id:3,val:'Just Right'},{id:4,val:'Slightly Humid'},{id:5,val:'Too Humid'}];var _React$useState13=React.useState(''),_React$useState14=_slicedToArray(_React$useState13,2),humid=_React$useState14[0],setHumid=_React$useState14[1];var clothingList=[{id:1,val:'Minimal [shorts, shirt]'},{id:2,val:'Average [pants, shirt]'},{id:3,val:'Heavy [pants, jacket/sweater/sweatshirt]'}];var _React$useState15=React.useState(''),_React$useState16=_slicedToArray(_React$useState15,2),clothing=_React$useState16[0],setClothing=_React$useState16[1];var activitiesList=[{id:1,val:'Sitting'},{id:2,val:'Standing'},{id:3,val:'Walking'},{id:4,val:'Jogging/Fast Walking'},{id:5,val:'Running'},{id:6,val:'Other'}];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),activities=_React$useState18[0],setActivities=_React$useState18[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"survey-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"top-buttons\"},/*#__PURE__*/React.createElement(SecondaryButton,{onClick:toggleState},\"Back\")),/*#__PURE__*/React.createElement(\"h1\",null,\"Survey\"),/*#__PURE__*/React.createElement(\"div\",{className:\"baseinput-div\"},/*#__PURE__*/React.createElement(BaseInputField,{label:'What building are you in?',iduser:'building',width:'300px',value:buildingNumber,onChange:function onChange(e){return setBuildingNumber(e.target.value);},err:trySubmit&&buildingNumber===''})),/*#__PURE__*/React.createElement(\"div\",{className:\"baseinput-div\"},/*#__PURE__*/React.createElement(BaseInputField,{label:'What room are you in?',iduser:'room',width:'300px',value:roomNumber,onChange:function onChange(e){return setRoomNumber(e.target.value);},err:trySubmit&&roomNumber===''})),/*#__PURE__*/React.createElement(\"p\",null,\"How does the temperature feel in the room?\"),/*#__PURE__*/React.createElement(BaseSelectOne,{optionsList:tempInRoomList,value:tempInRoom,onChange:function onChange(e){return setTempInRoom(e.target.value);},err:trySubmit&&tempInRoom===''}),/*#__PURE__*/React.createElement(\"p\",null,\"How would you prefer for it to feel?\"),/*#__PURE__*/React.createElement(BaseSelectOne,{optionsList:preferFeelList,value:preferFeel,onChange:function onChange(e){return setPreferFeel(e.target.value);},err:trySubmit&&preferFeel===''}),/*#__PURE__*/React.createElement(\"p\",null,\"How do you feel about the air circulation in the room?\"),/*#__PURE__*/React.createElement(BaseSelectOne,{optionsList:airCirculationList,value:airCirculation,onChange:function onChange(e){return setAirCirculation(e.target.value);},err:trySubmit&&airCirculation===''}),/*#__PURE__*/React.createElement(\"p\",null,\"How humid does the room feel?\"),/*#__PURE__*/React.createElement(BaseSelectOne,{optionsList:humidList,value:humid,onChange:function onChange(e){return setHumid(e.target.value);},err:trySubmit&&humid===''}),/*#__PURE__*/React.createElement(\"p\",null,\"What clothing layers are you wearing?\"),/*#__PURE__*/React.createElement(BaseSelectOne,{optionsList:clothingList,value:clothing,onChange:function onChange(e){return setClothing(e.target.value);},err:trySubmit&&clothing===''}),/*#__PURE__*/React.createElement(\"p\",null,\"What activities have you done in the past 10-20 minutes?\"),/*#__PURE__*/React.createElement(BaseSelectMultiple,{optionsList:activitiesList,value:activities,onChange:function onChange(e){return setActivities(e.target.value);},err:trySubmit&&activities.length===0}),/*#__PURE__*/React.createElement(\"div\",{className:\"survey-submit\"},/*#__PURE__*/React.createElement(BaseButton,{width:'300px',onClick:postData},\"Submit\")));};export default Survey;","map":{"version":3,"sources":["/Users/gabehyun/Desktop/classes/ThermalComfort/CPTC-Research/thermalComfortApp/src/components/Survey/Survey.tsx"],"names":["React","BaseButton","BaseInputField","BaseSelectOne","BaseSelectMultiple","SecondaryButton","pushData","useAuth","toast","request","require","Survey","props","toggleState","currentUser","canSubmit","surveyData","date","Date","getWeatherData","apiKey","city","url","err","response","body","cod","weatherData","JSON","parse","main","temp","windspeed","wind","speed","humidity","postData","setTrySubmit","buildingNumber","roomNumber","tempInRoom","thermalSensation","preferFeel","thermalPreference","airCirculation","airCirculationSensation","humid","humiditySensation","clothing","activities","recentAction","timestamp","toLocaleString","toString","email","error","useState","trySubmit","setBuildingNumber","setRoomNumber","tempInRoomList","id","val","setTempInRoom","preferFeelList","setPreferFeel","airCirculationList","setAirCirculation","humidList","setHumid","clothingList","setClothing","activitiesList","setActivities","e","target","value","length"],"mappings":"qMAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,gCAA1B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,0CAA/B,CACA,MAAOC,CAAAA,eAAP,KAA4B,kDAA5B,CACA,OAASC,QAAT,KAAyB,sBAAzB,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OAASC,KAAT,KAAsB,aAAtB,CAEA,GAAIC,CAAAA,OAAO,CAAGC,OAAO,CAAC,SAAD,CAArB,CAEA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAA4B,IAClBC,CAAAA,WADkB,CACFD,KADE,CAClBC,WADkB,cAEFN,OAAO,EAFL,CAElBO,WAFkB,UAElBA,WAFkB,CAG1B,GAAIC,CAAAA,SAAS,CAAG,IAAhB,CACA,GAAIC,CAAAA,UAAe,CAAG,EAAtB,CACA,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAb,CAEA,QAASC,CAAAA,cAAT,EAAyB,CACvB,GAAIC,CAAAA,MAAM,CAAG,kCAAb,CACA,GAAIC,CAAAA,IAAI,CAAG,iBAAX,CACA,GAAIC,CAAAA,GAAG,4DAAuDD,IAAvD,mBAAqED,MAArE,CAAP,CACAX,OAAO,CAACa,GAAD,CAAM,SAAUC,GAAV,CAAmBC,QAAnB,CAAiCC,IAAjC,CAA2C,CACpD,GAAGF,GAAH,CAAO,CACH,OACH,CAFD,IAGK,CACH,GAAIE,IAAI,CAACC,GAAL,GAAa,KAAjB,CAAwB,CACtB,GAAIC,CAAAA,WAAW,CAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAlB,CACA,GAAIE,WAAW,CAACG,IAAhB,CAAsB,CACpBd,UAAU,CAACe,IAAX,CAAkBJ,WAAW,CAACG,IAAZ,CAAiBC,IAAnC,CACAf,UAAU,CAACgB,SAAX,CAAuBL,WAAW,CAACM,IAAZ,CAAiBC,KAAxC,CACAlB,UAAU,CAACmB,QAAX,CAAsBR,WAAW,CAACG,IAAZ,CAAiBK,QAAvC,CACD,CACF,CACF,CACJ,CAdM,CAAP,CAeD,CACDhB,cAAc,GAEd,QAASiB,CAAAA,QAAT,EAAoB,CAClBC,YAAY,CAAC,IAAD,CAAZ,CACA,GAAIvB,WAAJ,CAAiB,CACfwB,cAAc,GAAK,EAAnB,CAAwBtB,UAAU,CAACsB,cAAX,CAA4BA,cAApD,CAAqEvB,SAAS,CAAG,KAAjF,CACAwB,UAAU,GAAK,EAAf,CAAoBvB,UAAU,CAACuB,UAAX,CAAwBA,UAA5C,CAAyDxB,SAAS,CAAG,KAArE,CACAyB,UAAU,GAAK,EAAf,CAAoBxB,UAAU,CAACyB,gBAAX,CAA8BD,UAAlD,CAA+DzB,SAAS,CAAG,KAA3E,CACA2B,UAAU,GAAK,EAAf,CAAoB1B,UAAU,CAAC2B,iBAAX,CAA+BD,UAAnD,CAAgE3B,SAAS,CAAG,KAA5E,CACA6B,cAAc,GAAK,EAAnB,CAAwB5B,UAAU,CAAC6B,uBAAX,CAAqCD,cAA7D,CAA8E7B,SAAS,CAAG,KAA1F,CACA+B,KAAK,GAAK,EAAV,CAAe9B,UAAU,CAAC+B,iBAAX,CAA+BD,KAA9C,CAAsD/B,SAAS,CAAG,KAAlE,CACAiC,QAAQ,GAAK,EAAb,CAAkBhC,UAAU,CAACgC,QAAX,CAAsBA,QAAxC,CAAmDjC,SAAS,CAAG,KAA/D,CACAkC,UAAU,GAAK,EAAf,CAAoBjC,UAAU,CAACkC,YAAX,CAA0BD,UAA9C,CAA2DlC,SAAS,CAAG,KAAvE,CACAC,UAAU,CAACmC,SAAX,CAAuBlC,IAAI,CAACmC,cAAL,GAAsBC,QAAtB,EAAvB,CACA,GAAGtC,SAAH,CAAa,CACX,GAAI,CACFT,QAAQ,CAACU,UAAD,CAAaF,WAAW,CAACwC,KAAzB,CAAR,CACA9C,KAAK,6CAAL,CACD,CACD,MAAM+C,KAAN,CAAa,CACX/C,KAAK,oCAA6B+C,KAA7B,EAAL,CACD,CACD1C,WAAW,GACZ,CATD,IAUK,CACHL,KAAK,CAAC,uDAAD,CAAL,CACD,CACF,CACF,CAvDyB,oBAyDQR,KAAK,CAACwD,QAAN,CAAe,KAAf,CAzDR,oDAyDnBC,SAzDmB,qBAyDRpB,YAzDQ,0CA0DkBrC,KAAK,CAACwD,QAAN,CAAe,EAAf,CA1DlB,qDA0DnBlB,cA1DmB,qBA0DHoB,iBA1DG,0CA2DU1D,KAAK,CAACwD,QAAN,CAAe,EAAf,CA3DV,qDA2DnBjB,UA3DmB,qBA2DPoB,aA3DO,qBA6D1B,GAAMC,CAAAA,cAAc,CAAG,CACrB,CAACC,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,MAAb,CADqB,CAErB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,MAAb,CAFqB,CAGrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,eAAb,CAHqB,CAIrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,+BAAb,CAJqB,CAKrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,eAAb,CALqB,CAMrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,MAAb,CANqB,CAOrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,KAAb,CAPqB,CAAvB,CA7D0B,qBAsEU9D,KAAK,CAACwD,QAAN,CAAe,EAAf,CAtEV,qDAsEnBhB,UAtEmB,qBAsEPuB,aAtEO,qBAwE1B,GAAMC,CAAAA,cAAc,CAAG,CACrB,CAACH,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,QAAb,CADqB,CAErB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,WAAb,CAFqB,CAGrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,QAAb,CAHqB,CAAvB,CAxE0B,qBA6EU9D,KAAK,CAACwD,QAAN,CAAe,EAAf,CA7EV,sDA6EnBd,UA7EmB,sBA6EPuB,aA7EO,sBA+E1B,GAAMC,CAAAA,kBAAkB,CAAG,CACzB,CAACL,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,QAAb,CADyB,CAEzB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,WAAb,CAFyB,CAGzB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,QAAb,CAHyB,CAA3B,CA/E0B,sBAoFkB9D,KAAK,CAACwD,QAAN,CAAe,EAAf,CApFlB,uDAoFnBZ,cApFmB,sBAoFHuB,iBApFG,sBAsF1B,GAAMC,CAAAA,SAAS,CAAG,CAChB,CAACP,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,SAAb,CADgB,CAEhB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,cAAb,CAFgB,CAGhB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,YAAb,CAHgB,CAIhB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,gBAAb,CAJgB,CAKhB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,WAAb,CALgB,CAAlB,CAtF0B,sBA6FA9D,KAAK,CAACwD,QAAN,CAAe,EAAf,CA7FA,uDA6FnBV,KA7FmB,sBA6FZuB,QA7FY,sBA+F1B,GAAMC,CAAAA,YAAY,CAAG,CACnB,CAACT,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,yBAAb,CADmB,CAEnB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,wBAAb,CAFmB,CAGnB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,0CAAb,CAHmB,CAArB,CA/F0B,sBAoGM9D,KAAK,CAACwD,QAAN,CAAe,EAAf,CApGN,uDAoGnBR,QApGmB,sBAoGTuB,WApGS,sBAsG1B,GAAMC,CAAAA,cAAc,CAAG,CACrB,CAACX,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,SAAb,CADqB,CAErB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,UAAb,CAFqB,CAGrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,SAAb,CAHqB,CAIrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,sBAAb,CAJqB,CAKrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,SAAb,CALqB,CAMrB,CAACD,EAAE,CAAE,CAAL,CAAQC,GAAG,CAAE,OAAb,CANqB,CAAvB,CAtG0B,sBA8GU9D,KAAK,CAACwD,QAAN,CAAe,EAAf,CA9GV,uDA8GnBP,UA9GmB,sBA8GPwB,aA9GO,sBAgH1B,mBACE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACM,oBAAC,eAAD,EAAiB,OAAO,CAAE5D,WAA1B,SADN,CADF,cAIE,uCAJF,cAKE,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,cAAD,EACE,KAAK,CAAE,2BADT,CAEE,MAAM,CAAE,UAFV,CAGE,KAAK,CAAE,OAHT,CAIE,KAAK,CAAEyB,cAJT,CAKE,QAAQ,CAAE,kBAACoC,CAAD,QAAYhB,CAAAA,iBAAiB,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7B,EALZ,CAME,GAAG,CAAEnB,SAAS,EAAInB,cAAc,GAAK,EANvC,EADF,CALF,cAeE,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,cAAD,EACE,KAAK,CAAE,uBADT,CAEE,MAAM,CAAE,MAFV,CAGE,KAAK,CAAE,OAHT,CAIE,KAAK,CAAEC,UAJT,CAKE,QAAQ,CAAE,kBAACmC,CAAD,QAAYf,CAAAA,aAAa,CAACe,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,EALZ,CAME,GAAG,CAAEnB,SAAS,EAAIlB,UAAU,GAAK,EANnC,EADF,CAfF,cAyBE,0EAzBF,cA0BE,oBAAC,aAAD,EACE,WAAW,CAAEqB,cADf,CAEE,KAAK,CAAEpB,UAFT,CAGE,QAAQ,CAAE,kBAACkC,CAAD,QAAYX,CAAAA,aAAa,CAACW,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,EAHZ,CAIE,GAAG,CAAEnB,SAAS,EAAIjB,UAAU,GAAK,EAJnC,EA1BF,cAgCE,oEAhCF,cAiCE,oBAAC,aAAD,EACE,WAAW,CAAEwB,cADf,CAEE,KAAK,CAAEtB,UAFT,CAGE,QAAQ,CAAE,kBAACgC,CAAD,QAAYT,CAAAA,aAAa,CAACS,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,EAHZ,CAIE,GAAG,CAAEnB,SAAS,EAAIf,UAAU,GAAK,EAJnC,EAjCF,cAuCE,sFAvCF,cAwCE,oBAAC,aAAD,EACE,WAAW,CAAEwB,kBADf,CAEE,KAAK,CAAEtB,cAFT,CAGE,QAAQ,CAAE,kBAAC8B,CAAD,QAAYP,CAAAA,iBAAiB,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7B,EAHZ,CAIE,GAAG,CAAEnB,SAAS,EAAIb,cAAc,GAAK,EAJvC,EAxCF,cA8CE,6DA9CF,cA+CE,oBAAC,aAAD,EACE,WAAW,CAAEwB,SADf,CAEE,KAAK,CAAEtB,KAFT,CAGE,QAAQ,CAAE,kBAAC4B,CAAD,QAAYL,CAAAA,QAAQ,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAApB,EAHZ,CAIE,GAAG,CAAEnB,SAAS,EAAIX,KAAK,GAAK,EAJ9B,EA/CF,cAqDE,qEArDF,cAsDE,oBAAC,aAAD,EACE,WAAW,CAAEwB,YADf,CAEE,KAAK,CAAEtB,QAFT,CAGE,QAAQ,CAAE,kBAAC0B,CAAD,QAAYH,CAAAA,WAAW,CAACG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAvB,EAHZ,CAIE,GAAG,CAAEnB,SAAS,EAAIT,QAAQ,GAAK,EAJjC,EAtDF,cA4DE,wFA5DF,cA6DE,oBAAC,kBAAD,EACE,WAAW,CAAEwB,cADf,CAEE,KAAK,CAAEvB,UAFT,CAGE,QAAQ,CAAE,kBAACyB,CAAD,QAAYD,CAAAA,aAAa,CAACC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,EAHZ,CAIE,GAAG,CAAEnB,SAAS,EAAIR,UAAU,CAAC4B,MAAX,GAAsB,CAJ1C,EA7DF,cAmEE,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,UAAD,EAAY,KAAK,CAAE,OAAnB,CAA4B,OAAO,CAAEzC,QAArC,WADF,CAnEF,CADF,CAyED,EAED,cAAezB,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport './Survey.css';\nimport BaseButton from '../BaseButton/BaseButton'\nimport BaseInputField from '../BaseInputField/BaseInputField';\nimport BaseSelectOne from '../BaseSelectOne/BaseSelectOne';\nimport BaseSelectMultiple from '../BaseSelectMultiple/BaseSelectMultiple';\nimport SecondaryButton from \"../../components/SecondaryButton/SecondaryButton\";\nimport { pushData } from '../../firebaseConfig';\nimport { useAuth } from '../../contexts/AuthContext'\nimport { toast } from '../../toast'\n\nvar request = require('request');\n\nfunction Survey(props: any) {\n  const { toggleState } = props;\n  const { currentUser } = useAuth();\n  let canSubmit = true;\n  let surveyData: any = {};\n  const date = new Date();\n\n  function getWeatherData(){\n    let apiKey = 'a28b0237f94d95bbd08c26352f7c7bdb';\n    let city = \"San Luis Obispo\";\n    let url = `http://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`\n    request(url, function (err:any, response:any, body:any) {\n        if(err){\n            return;\n        }\n        else {\n          if (body.cod !== \"404\") {\n            let weatherData = JSON.parse(body);\n            if (weatherData.main) {\n              surveyData.temp = weatherData.main.temp;\n              surveyData.windspeed = weatherData.wind.speed;\n              surveyData.humidity = weatherData.main.humidity;\n            }\n          }\n        }\n    });\n  }\n  getWeatherData();\n\n  function postData() {\n    setTrySubmit(true);\n    if (currentUser) {\n      buildingNumber !== '' ? surveyData.buildingNumber = buildingNumber : canSubmit = false;\n      roomNumber !== '' ? surveyData.roomNumber = roomNumber : canSubmit = false;\n      tempInRoom !== '' ? surveyData.thermalSensation = tempInRoom : canSubmit = false;\n      preferFeel !== '' ? surveyData.thermalPreference = preferFeel : canSubmit = false;\n      airCirculation !== '' ? surveyData.airCirculationSensation = airCirculation : canSubmit = false;\n      humid !== '' ? surveyData.humiditySensation = humid : canSubmit = false;\n      clothing !== '' ? surveyData.clothing = clothing : canSubmit = false;\n      activities !== [] ? surveyData.recentAction = activities : canSubmit = false;\n      surveyData.timestamp = date.toLocaleString().toString();\n      if(canSubmit){\n        try {\n          pushData(surveyData, currentUser.email);\n          toast(`Thank you! Survey submitted successfully.`);\n        }\n        catch(error) {\n          toast(`Error submitting survey: ${error}`);\n        }\n        toggleState();\n      }\n      else {\n        toast('Please answer all of the questions before submitting.');\n      }\n    }\n  }\n\n  const [trySubmit, setTrySubmit] = React.useState(false);\n  const [buildingNumber, setBuildingNumber] = React.useState('');\n  const [roomNumber, setRoomNumber] = React.useState('');\n\n  const tempInRoomList = [\n    {id: 1, val: 'Cold'},\n    {id: 2, val: 'Cool'},\n    {id: 3, val: 'Slightly Cool'},\n    {id: 4, val: 'Neutral: Neither Cool or Warm'},\n    {id: 5, val: 'Slightly Warm'},\n    {id: 6, val: 'Warm'},\n    {id: 7, val: 'Hot'},\n  ]\n  const [tempInRoom, setTempInRoom] = React.useState('');\n\n  const preferFeelList = [\n    {id: 1, val: 'Cooler'},\n    {id: 2, val: 'No Change'},\n    {id: 3, val: 'Warmer'},\n  ]\n  const [preferFeel, setPreferFeel] = React.useState('');\n\n  const airCirculationList = [\n    {id: 1, val: 'Cooler'},\n    {id: 2, val: 'No Change'},\n    {id: 3, val: 'Warmer'},\n  ]\n  const [airCirculation, setAirCirculation] = React.useState('');\n\n  const humidList = [\n    {id: 1, val: 'Too Dry'},\n    {id: 2, val: 'Slightly Dry'},\n    {id: 3, val: 'Just Right'},\n    {id: 4, val: 'Slightly Humid'},\n    {id: 5, val: 'Too Humid'},\n  ]\n  const [humid, setHumid] = React.useState('');\n\n  const clothingList = [\n    {id: 1, val: 'Minimal [shorts, shirt]'},\n    {id: 2, val: 'Average [pants, shirt]'},\n    {id: 3, val: 'Heavy [pants, jacket/sweater/sweatshirt]'},\n  ]\n  const [clothing, setClothing] = React.useState('');\n\n  const activitiesList = [\n    {id: 1, val: 'Sitting'},\n    {id: 2, val: 'Standing'},\n    {id: 3, val: 'Walking'},\n    {id: 4, val: 'Jogging/Fast Walking'},\n    {id: 5, val: 'Running'},\n    {id: 6, val: 'Other'},\n  ]\n  const [activities, setActivities] = React.useState([]);\n\n  return (\n    <div className=\"survey-container\">\n      <div className=\"top-buttons\">\n            <SecondaryButton onClick={toggleState}>Back</SecondaryButton>\n        </div>\n      <h1>Survey</h1>\n      <div className=\"baseinput-div\">\n        <BaseInputField\n          label={'What building are you in?'}\n          iduser={'building'}\n          width={'300px'}\n          value={buildingNumber}\n          onChange={(e: any) => setBuildingNumber(e.target.value)}\n          err={trySubmit && buildingNumber === ''}\n        />\n      </div>\n      <div className=\"baseinput-div\">\n        <BaseInputField\n          label={'What room are you in?'}\n          iduser={'room'}\n          width={'300px'}\n          value={roomNumber}\n          onChange={(e: any) => setRoomNumber(e.target.value)}\n          err={trySubmit && roomNumber === ''}\n        />\n      </div>\n      <p>How does the temperature feel in the room?</p>\n      <BaseSelectOne\n        optionsList={tempInRoomList}\n        value={tempInRoom}\n        onChange={(e: any) => setTempInRoom(e.target.value)}\n        err={trySubmit && tempInRoom === ''}\n      />\n      <p>How would you prefer for it to feel?</p>\n      <BaseSelectOne\n        optionsList={preferFeelList}\n        value={preferFeel}\n        onChange={(e: any) => setPreferFeel(e.target.value)}\n        err={trySubmit && preferFeel === ''}\n      />\n      <p>How do you feel about the air circulation in the room?</p>\n      <BaseSelectOne\n        optionsList={airCirculationList}\n        value={airCirculation}\n        onChange={(e: any) => setAirCirculation(e.target.value)}\n        err={trySubmit && airCirculation === ''}\n      />\n      <p>How humid does the room feel?</p>\n      <BaseSelectOne\n        optionsList={humidList}\n        value={humid}\n        onChange={(e: any) => setHumid(e.target.value)}\n        err={trySubmit && humid === ''}\n      />\n      <p>What clothing layers are you wearing?</p>\n      <BaseSelectOne\n        optionsList={clothingList}\n        value={clothing}\n        onChange={(e: any) => setClothing(e.target.value)}\n        err={trySubmit && clothing === ''}\n      />\n      <p>What activities have you done in the past 10-20 minutes?</p>\n      <BaseSelectMultiple\n        optionsList={activitiesList}\n        value={activities}\n        onChange={(e: any) => setActivities(e.target.value)}\n        err={trySubmit && activities.length === 0}\n      />\n      <div className='survey-submit'>\n        <BaseButton width={'300px'} onClick={postData}>Submit</BaseButton>\n      </div>\n    </div>\n  )\n};\n\nexport default Survey"]},"metadata":{},"sourceType":"module"}